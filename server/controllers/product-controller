const Product = require("../models/Product.js");

module.exports = {
  //Get all products
  async allProducts(req, res) {
    const productData = await Product.find();

    if (!productData) {
      return res.status(400).json({ message: "Can't find all products!" });
    }

    res.status(200).json({ message: "found all products" });
  },

  // Delete a user
  async getSingleProduct(req, res) {
    const getProduct = await Product.findById(req.params.id);
    if (!getProduct) {
      return res
        .status(400)
        .json({ message: "Error with getting the product" });
    }
    res.json("Found the product", getProduct);
  },

  async getSingleProductBySlug(req, res) {
    const getProduct = await Product.findOne({ slug: req.params.slug });
    if (!getProduct) {
      return res
        .status(400)
        .json({ message: "Error with getting the product" });
    }
    res.json("Found the product", getProduct);
  },

  //Create a product
  async createProduct(req, res) {
    const createproduct = new Product(req.body);

    if (!createproduct) {
      return res
        .status(400)
        .json({ message: "Error with creating the product" });
    }
    res.json("Created the product", createproduct);
  },

  async updateProduct(req, res) {
    const updateproduct = Product.findByIdAndUpdate(
      { _id: req.params.id },
      req.body
    );
    if (!updateproduct) {
      return res
        .status(400)
        .json({ message: "Error with updating the product" });
    }
    res.json("Updated the product", updateproduct);
  },

  async deleteProduct(req, res) {
    const deleteproduct = Product.findByIdAndDelete({ _id: req.params.id });
    if (!deleteproduct) {
      return res
        .status(400)
        .json({ message: "Error with deleting the product" });
    }
    res.json("Deleted the product", deleteproduct);
  },
};
